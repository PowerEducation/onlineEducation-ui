<div> 
<div class="col-md-12">
  <div class="col-md-8"></div>
    <div class="col-md-4 float-right" ></div>
</div>
<div class="col-md-12">
  <div class="col-md-5">
       <mat-form-field class="example-full-width" >
          <input matInput  maxlength="32" placeholder="Enter Test Name" [(ngModel)]="testName">
          <mat-hint align="end">{{testName.length}} / 32</mat-hint>
          
        </mat-form-field>
  </div>
  <div class="col-md-6">
       <mat-form-field class="example-full-width" >
          <input matInput  maxlength="32" placeholder="Enter Category" [(ngModel)]="category">
          <mat-hint align="end">{{category.length}} / 32</mat-hint>
          
        </mat-form-field>
  </div>
  <div class="col-md-1">
    <button mat-raised-button class="float-right" color="primary" (click)="fetchTests()">Apply</button>
  </div>
</div>
<div class="col-md-12 container-fluid">
  <div class="col-md-1"></div>
    <div *ngIf="isLoading">
    <p-progressSpinner [style]="{width: '50px', height: '50px'}" strokeWidth="4" fill="#EEEEEE" animationDuration="2s"></p-progressSpinner>
  </div>
  <div class="col-md-10" *ngIf="!isLoading">
    <div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
    <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
    <input #gb type="text" pInputText size="50" placeholder="Global Filter">
    <button type="button" icon="fa-file-o" iconPos="left" label="All Data" (click)="dt.exportCSV()" style="float:right">Download</button>
</div>
      <p-dataTable [value]="tests"  [rows]="10" sortMode="multiple" exportFilename="Tests" 
                   [paginator]="true" [pageLinks]="3" [responsive]="true" [stacked]="stacked"
                   [globalFilter]="gb" #dt  expandableRows="true" (onRowExpand)="rowExpand()">
         <p-header>
       
    </p-header>
            <p-column expander="true" styleClass="col-icon" [style]="{'width':'25px'}"></p-column>
        <p-column field="testName" header="Test Name" [editable]="true" [style]=" {'overflow':'visible' }"
        [sortable]="true"></p-column>
        <p-column field="qCount" header="Question Count" [sortable]="true"></p-column>
        <p-column field="category" header="Category" [sortable]="true"></p-column>
        <p-column>
         <ng-template pTemplate="header">
            Action
        </ng-template>
         <ng-template let-test="rowData" let-index="rowIndex"  pTemplate="body" >
           <div *ngIf="source!==definedConstants.SOURCE_TEST_M">
              <button type="button"  mat-raised-button color="primary" (click)="deleteTest(test,index)">Delete</button>
              <button type="button"  mat-raised-button color="primary" (click)="resumeTest(test,index)">Resume</button>
           </div>
        </ng-template>
        </p-column>
        <ng-template let-test pTemplate="rowexpansion">
          <div *ngIf="test.questionIds.length==0"> No Question Added So far in the Test. 
             <a (click)="resumeTest(test,index)">Click here</a>
             to keep edit.</div>
            <div class="table-responsive" *ngIf="test.questionIds.length!=0">
                  <table class="table table-striped table-hover">
                    <tr>
                    <th> S.No. </th>
                    <th> Subject </th>
                    <th> Question Text </th>
                    <th>Action </th>
                    </tr>
                    <tr *ngFor="let quest of test.questionIds;let indexQ=index">
                      <td> {{indexQ +1}}</td><td>{{quest.subject}}</td><td>{{quest.qText.eng}}</td>
                      <td><button type="button"  mat-raised-button color="primary" (click)="removeQuestion(test,quest,indexQ)">Remove</button>
                      <!--<button type="button"  mat-raised-button color="primary" (click)="editQuestion(test,indexQ)">Edit</button>-->
                      </td>
                    </tr>
                  </table>
                </div>
          </ng-template>
      </p-dataTable>
  </div> 
  <div class="col-md-1"></div>
</div>
</div>